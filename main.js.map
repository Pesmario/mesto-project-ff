{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\n\tbaseUrl: 'https://nomoreparties.co/v1/wff-cohort-35',\n\theaders: {\n\t\tauthorization: '453087bc-2a76-4919-9e69-858b7dcbb411',\n\t\t'Content-Type': 'application/json',\n\t},\n}\n\nconst getResponse = res => {\n\tif (res.ok) {\n\t\treturn res.json()\n\t}\n\treturn Promise.reject(`Ошибка ${res.status}`)\n}\nexport const getUserDataApi = () => {\n\treturn fetch(`${config.baseUrl}/users/me`, {\n\t\theaders: config.headers,\n\t}).then(getResponse)\n}\n\nexport const getInitialsCardsApi = () => {\n\treturn fetch(`${config.baseUrl}/cards`, {\n\t\theaders: config.headers,\n\t}).then(getResponse)\n}\n\nexport const addNewCardApi = (name, link) => {\n\treturn fetch(`${config.baseUrl}/cards`, {\n\t\tmethod: 'POST',\n\t\theaders: config.headers,\n\t\tbody: JSON.stringify({\n\t\t\tname,\n\t\t\tlink,\n\t\t}),\n\t}).then(getResponse)\n}\n\nexport const editUserDataApi = (name, about) => {\n\treturn fetch(`${config.baseUrl}/users/me`, {\n\t\tmethod: 'PATCH',\n\t\theaders: config.headers,\n\t\tbody: JSON.stringify({\n\t\t\tname,\n\t\t\tabout,\n\t\t}),\n\t}).then(getResponse)\n}\n\nexport const setLikeApi = (cardId, isLiked) => {\n\tconst method = isLiked ? 'DELETE' : 'PUT'\n\n\treturn fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n\t\tmethod,\n\t\theaders: config.headers,\n\t}).then(getResponse)\n}\n\nexport const deleteCardApi = cardId => {\n\treturn fetch(`${config.baseUrl}/cards/${cardId}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: config.headers,\n\t}).then(getResponse)\n}\n\nexport const updateAvatarApi = avatar => {\n\treturn fetch(`${config.baseUrl}/users/me/avatar`, {\n\t\tmethod: 'PATCH',\n\t\theaders: config.headers,\n\t\tbody: JSON.stringify({\n\t\t\tavatar,\n\t\t}),\n\t}).then(getResponse)\n}","\nconst openModal = (element) => {\n  element.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closeModalOnEscape);\n};\n\nconst closeModal = (element) => {\n  element.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closeModalOnEscape);\n};\n\nconst closeModalOnEscape = (evt) => {\n  if (evt.key === \"Escape\") {\n    const openedPopup = document.querySelector(\".popup_is-opened\");\n    closeModal(openedPopup);\n  }\n};\n\nexport { openModal, closeModal, closeModalOnEscape }; \n\n","import { deleteCardApi, setLikeApi } from './api';\n\n\n//функция удаления карточки\nfunction deleteCard(cardElement, cardId) {\n\tdeleteCardApi(cardId)\n\t\t.then(() => {\n\t\t\tcardElement.remove()\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(`Ошибка при удалении карточки: ${err}`)\n\t\t})\n}\n\n// функция лайков\n function setLikeToCard(likeButton, cardId, likesCount) {\n\tconst isLiked = likeButton.classList.contains('card__like-button_is-active')\n\n\tsetLikeApi(cardId, isLiked)\n\t\t.then(updatedCard => {\n\t\t\tlikeButton.classList.toggle('card__like-button_is-active')\n\t\t\tlikesCount.textContent = updatedCard.likes.length\n\t\t})\n\t\t.catch(err => console.log(err))\n}\n\n//функция создания карточки\nfunction createCard(cardId, cardName, cardImageLink, deleteCard, likes, setLikeToCard, openImagePopup, ownerId, userId) {\n\tconst cardTemplate = document.querySelector('#card-template').content\n\tconst cardElement = cardTemplate.querySelector('.card').cloneNode(true)\n\tconst cardElementImage = cardElement.querySelector('.card__image')\n\tconst likesCount = cardElement.querySelector('.card__like-count')\n\n\tcardElementImage.setAttribute('src', cardImageLink)\n\tcardElementImage.setAttribute('alt', cardName)\n\tcardElement.querySelector('.card__title').textContent = cardName\n\tlikesCount.textContent = likes.length\n\n\tconst deleteButton = cardElement.querySelector('.card__delete-button')\n\n\tcardElementImage.addEventListener('click', () => {\n\t\topenImagePopup(cardImageLink, cardName)\n\t})\n\n\tconst likeButton = cardElement.querySelector('.card__like-button')\n\tlikeButton.addEventListener('click', () => {\n\t\tsetLikeToCard(likeButton, cardId, likesCount)\n\t})\n\n\tconst userHasLiked = likes.some(like => like._id === userId)\n\tif (userHasLiked) {\n\t\tlikeButton.classList.add('card__like-button_is-active')\n\t}\n\n\tif (ownerId !== userId) {\n\t\tconsole.log('Removing delete button')\n\t\tdeleteButton.remove()\n\t} else {\n\t\tdeleteButton.addEventListener('click', () => {\n\t\t\tdeleteCard(cardElement, cardId)\n\t\t})\n\t}\n\n\treturn cardElement\n}\n\nexport { createCard, deleteCard, setLikeToCard }; ","export { clearValidation, enableValidation }\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\n\tconst errorElement = formElement.querySelector(`.${inputElement.id}-error`)\n\tinputElement.classList.add(validationConfig.inputErrorClass)\n\terrorElement.textContent = errorMessage\n\terrorElement.classList.add(validationConfig.errorClass)\n}\n\nconst hideInputError = (formElement, inputElement, validationConfig) => {\n\tconst errorElement = formElement.querySelector(`.${inputElement.id}-error`)\n\tinputElement.classList.remove(validationConfig.inputErrorClass)\n\tinputElement.setCustomValidity('')\n\terrorElement.classList.remove(validationConfig.errorClass)\n\terrorElement.textContent = ''\n}\n\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\n\tif (!inputElement.validity.valid) {\n\t\tshowInputError(formElement, inputElement, inputElement.validationMessage, validationConfig)\n\t} else {\n\t\thideInputError(formElement, inputElement, validationConfig)\n\t}\n}\n\nconst setEventListeners = (formElement, validationConfig) => {\n\tconst inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector))\n\tconst buttonElement = formElement.querySelector(validationConfig.submitButtonSelector)\n\ttoggleButtonState(inputList, buttonElement, validationConfig)\n\tinputList.forEach(inputElement => {\n\t\tinputElement.addEventListener('input', function() {\n\t\t\tcheckInputValidity(formElement, inputElement, validationConfig)\n\t\t\ttoggleButtonState(inputList, buttonElement, validationConfig)\n\t\t})\n\t})\n}\n\nconst enableValidation = validationConfig => {\n\tconst formList = Array.from(document.querySelectorAll(validationConfig.formSelector))\n\tformList.forEach(formElement => {\n\t\tsetEventListeners(formElement, validationConfig)\n\t})\n}\n\nconst hasInvalidInput = (inputList, validationConfig) => {\n\treturn inputList.some(inputElement => {\n\t\treturn !inputElement.validity.valid\n\t})\n}\n\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\n\tif (hasInvalidInput(inputList)) {\n\t\tbuttonElement.disabled = true\n\t\tbuttonElement.classList.add(validationConfig.inactiveButtonClass)\n\t} else {\n\t\tbuttonElement.disabled = false\n\t\tbuttonElement.classList.remove(validationConfig.inactiveButtonClass)\n\t}\n}\n\nconst clearValidation = (formElement, validationConfig) => {\n\tconst inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector))\n\tconst buttonElement = formElement.querySelector(validationConfig.submitButtonSelector)\n\tinputList.forEach(inputElement => {\n\t\thideInputError(formElement, inputElement, validationConfig)\n\t})\n\ttoggleButtonState(inputList, buttonElement, validationConfig)\n}","\nimport './pages/index.css';\nimport { addNewCardApi, editUserDataApi, getInitialsCardsApi, getUserDataApi, updateAvatarApi } from './components/api.js';\nimport { initialCards } from './components/cards.js';\nimport { openModal, closeModal, closeModalOnEscape } from './components/modal.js'; \nimport { createCard, deleteCard, setLikeToCard } from './components/card.js'; \nimport { clearValidation, enableValidation } from './components/validation.js';\n\n// находим все попапы\nconst popupAll = document.querySelectorAll(\".popup\");\n\n//находим кнопку редактирования профиля, поля профиля, форму\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\n\n// находим форму редактирования профиля, попап ред-ия профиля, поля попапа редактирования профиля\nconst popupProfileEdit = document.querySelector(\".popup_type_edit\");\nconst popupProfileForm = document.forms[\"edit-profile\"];\nconst nameInput = document.querySelector('.popup__input_type_description');\nconst jobInput = document.querySelector('.popup__input_type_name');\n\n// находим кнопку добавления карточки\nconst newCardButton = document.querySelector('.profile__add-button');\n\n// находим попап добавления карточки, форму добавления карточки, поля формы\nconst popupNewCard = document.querySelector('.popup_type_new-card');\nconst popupNewCardForm = document.forms[\"new-place\"];\nconst cardNameInput = popupNewCard.querySelector('.popup__input_type_card-name');\nconst cardImgUrlInput = popupNewCard.querySelector('.popup__input_type_url');\n\n//переменные попапа картинки\nconst popupPicture = document.querySelector('.popup_type_image');\nconst popupPictureImage = document.querySelector('.popup__image');\nconst popupPictureText = document.querySelector('.popup__caption');\n\n// переменные лайка\nconst likeButton = document.querySelector('.card__like-button');\n\n// находим аватар и его элементы\n\nconst editAvatarPopup = document.querySelector('.popup_type_avatar');\nconst editAvatarForm = document.querySelector('.popup__form[name=\"edit-avatar\"]');\nconst avatarUrlInput = editAvatarForm.querySelector('.popup__input_type_avatar');\nconst profileAvatar = document.querySelector('.profile__image');\nconst profileAddButton = document.querySelector('.profile__add-button');\n\n// получаем темплейт карточки\n\nconst placesList = document.querySelector('.places__list');\n\nlet currentUserId = null;\n\n// создаём конфиг проверки валидации\n\nconst validationConfig = {\n\tformSelector: '.popup__form',\n\tinputSelector: '.popup__input',\n\tsubmitButtonSelector: '.popup__button',\n\tinactiveButtonClass: 'popup__button_disabled',\n\tinputErrorClass: 'popup__input_type_error',\n\terrorClass: 'popup__error_visible',\n}\n\n// functions\n\n// функция заполнения попапа редактирования профиля\nconst fillProfilePopup = (form, name, description) => {\n  form.elements.name.value = name;\n  form.elements.description.value = description;\n};\n\n//функция инициализации попапа с картинкой\n\nfunction openImagePopup(imageSrc, caption) {\n\tpopupPictureImage.src = imageSrc\n\tpopupPictureImage.alt = caption\n\tpopupPictureText.textContent = caption\n\n\topenModal(popupPicture)\n}\n\n// функция заполения профиля новыми данными после submit\n\nfunction handleProfilFormSubmit(evt) {\n  evt.preventDefault();\n  renderLoading(true, popupProfileForm);\n  const nameValue = nameInput.value;\n  const jobValue = jobInput.value;\n  editUserDataApi(nameValue, jobValue)\n\t\t.then(userData => {\n      profileTitle.textContent = jobValue;\n      profileDescription.textContent = nameValue;\n      closeModal(popupProfileEdit);\n    })\n    .catch(err => console.log(err))\n\t\t.finally(() => {\n\t\t\trenderLoading(false, popupProfileForm)\n\t\t});\n}\n\n// функция добавления карточки\n\nfunction submitAddCard(evt) {\n  evt.preventDefault();\n  renderLoading(true, popupNewCardForm);\n  const cardDataObj = {};\n  cardDataObj.name = cardNameInput.value;\n  cardDataObj.link = cardImgUrlInput.value;\n\n  addNewCardApi(cardDataObj.name, cardDataObj.link)\n    .then(card =>  {\n      const newCard = createCard(card._id, \n        cardDataObj.name, \n        cardDataObj.link,\n        deleteCard, \n        card.likes, \n        setLikeToCard, \n        openImagePopup, \n        card.owner._id, \n        currentUserId)\n        addCard(newCard, true)\n        popupNewCardForm.reset()\n        closeModal(popupNewCard)\n    })\n    .catch(err => console.error(err))\n\t\t.finally(() => {\n\t\t\trenderLoading(false, popupNewCardForm)\n\t\t})\n}\n\nfunction addCard(cardElement, toStart) {\n\tif (toStart) {\n\t\tplacesList.prepend(cardElement)\n\t} else {\n\t\tplacesList.append(cardElement)\n\t}\n}\n\nPromise.all([getUserDataApi(), getInitialsCardsApi()])\n\t.then(([userData, initialCards]) => {\n\t\tcurrentUserId = userData._id\n\t\tprofileTitle.textContent = userData.name\n\t\tprofileDescription.textContent = userData.about\n\t\tprofileAvatar.style.backgroundImage = `url(${userData.avatar})`\n\n\t\tinitialCards.forEach(card => {\n\t\t\tconst newCard = createCard(card._id, card.name, card.link, deleteCard, card.likes, setLikeToCard, openImagePopup, card.owner._id, currentUserId)\n\t\t\taddCard(newCard)\n\t\t})\n\t})\n\t.catch(error => console.log(error))\n\n// функция обновления аватара \n\nfunction handleEditAvatarSubmit(evt) {\n\tevt.preventDefault()\n\trenderLoading(true, editAvatarForm)\n\tconst avatarUrl = avatarUrlInput.value\n\tupdateAvatarApi(avatarUrl)\n\t\t.then(avatar => {\n\t\t\tprofileAvatar.style.backgroundImage = `url(${avatar.avatar})`\n\t\t\teditAvatarForm.reset()\n\t\t\tcloseModal(editAvatarPopup)\n\t\t})\n\t\t.catch(err => console.log(err))\n\t\t.finally(() => {\n\t\t\trenderLoading(false, editAvatarForm)\n\t\t})\n};\n\n// функция лоадинга\n\nconst renderLoading = (isLoading, formElement) => {\n\tconst buttonElement = formElement.querySelector('.popup__button')\n\tif (isLoading) {\n\t\tbuttonElement.setAttribute('data-text', buttonElement.textContent)\n\t\tbuttonElement.textContent = 'Сохранение...'\n\t} else {\n\t\tbuttonElement.textContent = buttonElement.getAttribute('data-text')\n\t\tbuttonElement.removeAttribute('data-text')\n\t}\n}\n\n// листенеры\n//profile popup\nprofileEditButton.addEventListener(\"click\", () => {\n  fillProfilePopup(\n    popupProfileForm,\n    profileTitle.textContent,\n    profileDescription.textContent,\n  );\n  clearValidation(popupProfileForm, validationConfig);\n  openModal(popupProfileEdit);\n});\n\nprofileAddButton.addEventListener('click', () => {\n\tpopupNewCardForm.reset()\n\tclearValidation(popupNewCardForm, validationConfig)\n\topenModal(popupNewCard)\n});\n\nprofileAvatar.addEventListener('click', () => {\n\teditAvatarForm.reset()\n\tclearValidation(editAvatarForm, validationConfig)\n\topenModal(editAvatarPopup)\n});\n\n// add card popup\nnewCardButton.addEventListener(\"click\", () => {\n  popupNewCardForm.reset();\n  clearValidation(popupNewCardForm, validationConfig);\n  openModal(popupNewCard);\n});\n\n// обработчик submit на редактирование профиля\npopupProfileForm.addEventListener('submit', handleProfilFormSubmit); \n\n// обрабочик submit добавления карточки\npopupNewCardForm.addEventListener('submit', submitAddCard);\n\n// обработчик submit обновления аватара\neditAvatarForm.addEventListener('submit', handleEditAvatarSubmit);\n\n// добавляем анимацию всем попапам\npopupAll.forEach((element) => element.classList.add('popup_is-animated'));\n\n// цикл закрытия всех попапов крестику или оверлею\npopupAll.forEach(function(element) {\n  element.addEventListener(\"click\", (evt) => {\n    if (evt.target === evt.currentTarget || evt.target.classList.contains(\"popup__close\")) {\n      closeModal(evt.currentTarget);\n    }\n  })\n});\n\nenableValidation(validationConfig);\n\n\n\n\n\n\n\n\n\n"],"names":["config","baseUrl","headers","authorization","getResponse","res","ok","json","Promise","reject","concat","status","openModal","element","classList","add","document","addEventListener","closeModalOnEscape","closeModal","remove","removeEventListener","evt","key","openedPopup","querySelector","deleteCard","cardElement","cardId","fetch","method","then","deleteCardApi","catch","err","console","log","setLikeToCard","likeButton","likesCount","isLiked","setLikeApi","contains","updatedCard","toggle","textContent","likes","length","createCard","cardName","cardImageLink","openImagePopup","ownerId","userId","content","cloneNode","cardElementImage","setAttribute","deleteButton","some","like","_id","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","setCustomValidity","errorClass","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","popupAll","profileTitle","profileDescription","profileEditButton","popupProfileEdit","popupProfileForm","forms","nameInput","jobInput","newCardButton","popupNewCard","popupNewCardForm","cardNameInput","cardImgUrlInput","popupPicture","popupPictureImage","popupPictureText","editAvatarPopup","editAvatarForm","avatarUrlInput","profileAvatar","profileAddButton","placesList","currentUserId","formSelector","imageSrc","caption","src","alt","addCard","toStart","prepend","append","all","_ref","_ref2","userData","initialCards","name","about","style","backgroundImage","avatar","card","link","owner","error","renderLoading","isLoading","getAttribute","removeAttribute","form","description","elements","value","reset","preventDefault","nameValue","jobValue","body","JSON","stringify","finally","cardDataObj","target","currentTarget","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}